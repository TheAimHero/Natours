{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/mapbox.js","public/js/updateSettings.js"],"sourcesContent":["import { login, logout } from './login.js';\nimport { displayMap } from './mapbox.js';\nimport { updateSettings, updatePassword } from './updateSettings.js';\n\nconst loginForm = document.querySelector('.form--login');\nif (loginForm) {\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nconst mapBox = document.getElementById('map');\nif (mapBox) {\n  const { locations } = mapBox.dataset;\n  const locationsArray = JSON.parse(locations);\n  displayMap(locationsArray);\n}\n\nconst logoutBtn = document.querySelector('.nav__el--logout');\nif (logoutBtn) {\n  logoutBtn.addEventListener('click', (e) => {\n    e.preventDefault();\n    logout();\n  });\n}\n\nconst userDataForm = document.querySelector('.form--user-data');\nif (userDataForm) {\n  userDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    console.log(document.getElementById('photo').files[0]);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    updateSettings(form);\n  });\n}\n\nconst userPassword = document.querySelector('.form-user-settings');\nif (userPassword) {\n  userPassword.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    const newPassword = document.getElementById('password').value;\n    const oldPassword = document.getElementById('password-current').value;\n    updatePassword({ oldPassword, newPassword, passwordConfirm });\n  });\n}\n","/* eslint-disable */\n\nimport { showAlerts } from './alerts';\n\nexport async function login(email, password) {\n  try {\n    // TODO: Learn to do this the vanilla way\n    const res = await axios({\n      method: 'POST',\n      url: 'http://localhost:3000/api/v1/users/login',\n      data: { email, password },\n    });\n    if (res.data.status === 'success') {\n      showAlerts('success', 'Login Successful');\n      window.setTimeout(() => {\n        window.location.href = '/';\n      }, 1000);\n    }\n  } catch (err) {\n    showAlerts('error', err.response.data.message);\n  }\n}\n\nexport async function logout() {\n  try {\n    // TODO: Learn to do this the vanilla way\n    const res = await axios({\n      method: 'GET',\n      url: 'http://localhost:3000/api/v1/users/logout',\n    });\n    if (res.data.status === 'success') {\n      showAlerts('success', 'Logout Successful');\n      location.reload(true);\n      window.setTimeout(() => {\n        window.location.href = '/';\n      }, 100);\n    }\n  } catch (err) {\n    showAlerts('error', err.response.data.message);\n  }\n}\n","export function showAlerts(type, msg) {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  setTimeout(hideAlert, 5000);\n}\n\nexport function hideAlert() {\n  const el = document.querySelector('.alert');\n  el && el.remove();\n}\n","/* eslint-disable */\n\nexport function displayMap(locationsArray) {\n  mapboxgl.accessToken =\n    'pk.eyJ1IjoidGhlYWltaGVybyIsImEiOiJjbGkxYzdqdWowMTdzM3VwbW0wNWhsbWoxIn0.MU63tR9TXa5GDSTR0jS0yw';\n\n  const map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/theaimhero/cli23mu1400kk01pn258lcdtw',\n    interactive: false,\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locationsArray.forEach(loc => {\n    const el = document.createElement('div');\n    el.className = 'marker';\n    new mapboxgl.Marker({ element: el, anchor: 'bottom' })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    new mapboxgl.Popup({ offset: 35 })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n      .addTo(map);\n\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds, {\n    padding: { top: 200, bottom: 150, left: 200, right: 200 },\n  });\n}\n","import { showAlerts } from './alerts.js';\n\nexport async function updateSettings(data) {\n  try {\n    const res = await axios({\n      method: 'PATCH',\n      url: 'http://localhost:3000/api/v1/users/update-me',\n      data: data,\n    });\n    if (res.data.status === 'success') {\n      showAlerts('success', 'Settings updated successfully');\n      window.location.reload(true);\n    }\n  } catch (err) {\n    showAlerts('error', err.response.data.message);\n  }\n}\n\nexport async function updatePassword(data) {\n  try {\n    const res = await axios({\n      method: 'PATCH',\n      url: 'http://localhost:3000/api/v1/users/update-password',\n      data: data,\n    });\n    if (res.data.status === 'success') {\n      showAlerts('success', 'Password updated successfully');\n    }\n  } catch (err) {\n    showAlerts('error', err.response.data.message);\n  }\n}\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}